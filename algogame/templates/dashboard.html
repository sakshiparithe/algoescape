{% extends "base.html" %}
{% block content %}
<div class="dashboard-container">
    <h1>Welcome, {{ name }}! üéÆ</h1>
    <p class="subtitle">Master Algorithms Through Interactive Learning</p>
    
    <div class="dashboard-stats">
        <div class="stat-card">
            <h3>üìä Your Progress</h3>
            {% if progress %}
                {% for prog in progress %}
                <div class="progress-item">
                    <span class="algo-name">{{ prog[0] }}</span>
                    <div class="progress-bar">
                        <div class="progress-fill" data-width="{{ prog[2] * 10 }}"></div>
                    </div>
                    <span class="progress-text">{{ prog[2] }} levels</span>
                </div>
                {% endfor %}
            {% else %}
                <p>No progress yet. Start learning!</p>
            {% endif %}
        </div>
    </div>

    <div class="dashboard-menu">
        <a href="/level_selection" class="menu-card">
            <div class="card-icon">üéØ</div>
            <h3>Level Selection</h3>
            <p>Choose your algorithm and difficulty</p>
        </a>
        
        <a href="/leaderboard" class="menu-card">
            <div class="card-icon">üèÜ</div>
            <h3>Leaderboard</h3>
            <p>View top performers</p>
        </a>
        
        <div class="menu-card" onclick="showTutorial()">
            <div class="card-icon">üìö</div>
            <h3>Tutorial</h3>
            <p>Learn how to play</p>
        </div>
    </div>

    <div class="algorithm-showcase">
        <h3>Available Algorithms</h3>
        <div class="algo-grid">
            {% for algo in algorithms %}
            <div class="algo-item">
                <div class="algo-icon">
                    {% if algo == 'bubble_sort' %} ü´ß {% elif algo == 'insertion_sort' %} üìç {% elif algo == 'selection_sort' %} üéØ {% elif algo == 'merge_sort' %} üîÄ {% elif algo == 'quick_sort' %} ‚ö° {% endif %}
                </div>
                <span>{{ algo.replace('_', ' ').title() }}</span>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<style>
.dashboard-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.dashboard-stats {
    margin: 30px 0;
}

.stat-card {
    background: #1f1f1f;
    padding: 20px;
    border-radius: 15px;
    border: 2px solid #2196F3;
}

.progress-item {
    display: flex;
    align-items: center;
    margin: 10px 0;
    gap: 15px;
}

.algo-name {
    min-width: 150px;
    font-weight: bold;
}

.progress-bar {
    flex: 1;
    height: 20px;
    background: #333;
    border-radius: 10px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #4CAF50, #2196F3);
    transition: width 0.3s ease;
}

.progress-text {
    min-width: 60px;
    text-align: right;
}

.dashboard-menu {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 30px 0;
}

.menu-card {
    background: linear-gradient(135deg, #1f1f1f, #2a2a2a);
    padding: 25px;
    border-radius: 15px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    text-decoration: none;
    color: white;
}

.menu-card:hover {
    transform: translateY(-5px);
    border-color: #4CAF50;
    box-shadow: 0 10px 25px rgba(76, 175, 80, 0.3);
}

.card-icon {
    font-size: 48px;
    margin-bottom: 15px;
}

.algorithm-showcase {
    margin-top: 40px;
}

.algo-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 20px;
}

.algo-item {
    background: #2a2a2a;
    padding: 15px;
    border-radius: 10px;
    text-align: center;
    border: 1px solid #444;
}

.algo-icon {
    font-size: 24px;
    margin-bottom: 8px;
}

.subtitle {
    color: #888;
    font-size: 18px;
    margin-bottom: 30px;
}
</style>

<script>
// Set progress bar widths from data attributes
document.addEventListener('DOMContentLoaded', function() {
    const progressFills = document.querySelectorAll('.progress-fill');
    progressFills.forEach(fill => {
        const width = fill.dataset.width;
        if (width) {
            fill.style.width = width + '%';
        }
    });
});

function showTutorial() {
    alert('üéÆ How to Play:\n\n1. Select an algorithm and difficulty level\n2. Study the array carefully\n3. Use hints if you get stuck\n4. Complete the sorting with minimal steps\n5. Answer quiz questions to test knowledge\n6. Track your progress and climb the leaderboard!');
}
</script>
{% endblock %}
